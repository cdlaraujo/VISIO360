<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Visualizador 3D Colaborativo</title>
    <link rel="stylesheet" href="/src/style.css" />
    <script src="https://unpkg.com/peerjs@1.5.2/dist/peerjs.min.js"></script>
</head>
<body>
    <div id="app"></div>
    <div id="loading" class="loading-spinner"></div>
    <div id="progress-bar-container" class="progress-bar-container">
        <p class="progress-text">Carregando modelo... <span id="progress-percentage">0%</span></p>
        <div class="progress-bar">
            <div id="progress-bar-fill" class="progress-bar-fill"></div>
        </div>
    </div>

    <div id="ui-container">
        <h1>Visio3D Colaborativo</h1>
        <div id="room-section" class="section">
            <div class="section-title">Sala de Colaboração</div>
            <div id="room-connect-panel">
                <input type="text" id="user-name-input" class="input-field" placeholder="Seu nome" value="Usuário">
                <button id="create-room-btn" class="btn btn-success">🚀 Criar Nova Sala</button>
                <button id="join-room-btn" class="btn btn-secondary">🔗 Entrar em Sala</button>
                <div id="join-room-input" style="display: none; margin-top: 10px;">
                    <input type="text" id="room-id-input" class="input-field" placeholder="Código da sala (e.g. ABC123)">
                    <button id="join-room-confirm-btn" class="btn btn-primary">Entrar Agora</button>
                </div>
            </div>
            <div id="room-info-panel" style="display: none;">
                <div class="status-indicator">
                    <span id="status-dot" class="status-dot"></span>
                    <span id="connection-status">Desconectado</span>
                </div>
                <div class="room-code-display">
                    <label>Código da Sala:</label>
                    <div class="room-code" id="room-code-display"></div>
                    <button id="copy-room-btn" class="btn btn-primary">📋 Copiar Link de Convite</button>
                </div>
                <div class="peers-list">
                    <label>👥 Usuários Online: <span id="peer-count">1</span></label>
                    <div id="peers-container"></div>
                </div>
            </div>
        </div>
        <div id="model-loading-section" class="section">
            <div class="section-title">Modelo 3D</div>
            <div id="model-input-area">
                <p class="hint">Cole um link público (URL) do seu modelo 3D.</p>
                <input type="text" id="model-url-input" class="input-field" placeholder="URL do modelo (.glb, .gltf, .ply)">
                <button id="load-model-url-btn" class="btn btn-primary">Carregar Modelo via URL</button>
                <div style="text-align:center; margin:10px 0; color: #888;">OU</div>
                <label for="model-input" class="custom-file-upload">
                    📁 Carregar do Computador (Individual)
                </label>
                <input type="file" id="model-input" accept=".ply,.gltf,.glb" />
            </div>
            <div id="model-info-area" style="display:none;">
                <p style="margin: 0;">Modelo: <b id="model-name-display"></b></p>
                <button id="change-model-btn" class="btn btn-secondary">Trocar Modelo</button>
            </div>
        </div>
        <div class="tools-section">
            <button id="measure-tool-btn" class="tool-btn">📏 Distância</button>
            <button id="area-tool-btn" class="tool-btn">📐 Área Plana</button>
            <button id="surface-area-tool-btn" class="tool-btn">🗻 Área de Superfície</button>
            <button id="clear-all-btn" class="tool-btn clear-btn">🗑️ Limpar Medições</button>
        </div>
        <div id="instructions-panel" class="instructions-panel">
            <p id="tool-instructions" style="margin:0;"></p>
        </div>
        <div id="measurements-panel" class="measurements-panel section">
            <div class="section-title">Medições</div>
            <div id="measurements-container"></div>
        </div>
    </div>

    <script type="module" src="/src/main.js"></script>
</body>
</html>